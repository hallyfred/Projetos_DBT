version: 2

models:
###############################################################################
#################### --- STAGING: PEDIDOS (ORDERS) --- ########################
###############################################################################
  - name: STG_ORDERS
    description: "Tabela de pedidos limpa e traduzida para o português."
    columns:
      - name: ID_PEDIDO
        description: "Chave primária do pedido."
        data_tests:
          - unique
          - not_null
      - name: ID_CLIENTE
        description: "Código identificador do cliente (FK)."
        data_tests:
          - not_null
      - name: ID_COLABORADOR
        description: "ID do funcionário responsável pela venda."
      - name: ID_TRANSPORTADORA
        description: "ID da transportadora responsável pela entrega."
      - name: DATA_PEDIDO
        description: "Data que se espera a entrega do pedido"
      - name: DATA_REQUISICAO
        description: "Data solicitada para entrega."
      - name: DATA_EMBARQUE
        description: "Data em que o pedido saiu para entrega."
      - name: VALOR_FRETE
        description: "Custo total do frete do pedido."
      - name: NOME_DESTINATARIO
        description: "Nome da pessoa ou empresa que receberá o pedido."
      - name: ENDERECO_ENTREGA
        description: "Endereço completo de entrega."
      - name: CIDADE_ENTREGA
        description: "Cidade de destino."
      - name: REGIAO_ENTREGA
        description: "Região ou estado de destino."
      - name: CEP_ENTREGA
        description: "Código postal de destino."
      - name: PAIS_ENTREGA
        description: "País de destino."
      - name: DIAS_PROCESSAMENTO
        description: "Tempo até o embarque do pedido (em dias)."
      - name: STATUS_PEDIDO
        description: "Status do pedido (Enviado ou Pendente)."
        data_tests:
          - not_null
          - accepted_values:
              arguments:
                values: ['Enviado', 'Pendente']
      - name: PEDIDO_ATRASADO
        description: "Indicador se o pedido está atrasado (sim/não)."
        data_tests:
          - not_null
          - accepted_values:
              arguments:
                values: ['Sim', 'Não']


###############################################################################
################### --- STAGING: CLIENTES (CUSTOMERS) --- #####################
###############################################################################
  - name: STG_COSTUMERS
    description: "Cadastro de clientes com nomes de colunas padronizados."
    columns:
      - name: ID_CLIENTE
        description: "Código único do cliente."
        data_tests:
          - unique
          - not_null
      - name: NOME_EMPRESA
        description: "Nome da empresa cliente."
      - name: NOME_CONTATO
        description: "Nome do contato principal."
      - name: CARGO_CONTATO
        description: "Cargo do contato na empresa."
      - name: ENDERECO
        description: "Endereço de faturamento."
      - name: CIDADE
        description: "Cidade do cliente."
      - name: REGIAO
        description: "Estado ou região do cliente."
      - name: CEP
        description: "Código postal."
      - name: PAIS
        description: "País do cliente."
      - name: TELEFONE
        description: "Telefone de contato."
      - name: FAX
        description: "Número de fax."

###############################################################################
################# --- STAGING: FUNCIONÁRIOS (EMPLOYEES) --- ###################
###############################################################################
  - name: STG_EMPLOYEES
    description: "Informações cadastrais dos colaboradores da Northwind."
    columns:
      - name: ID_COLABORADOR
        description: "ID único do funcionário."
        data_tests:
          - unique
          - not_null
      - name: SOBRENOME
        description: "Sobrenome do colaborador."
      - name: NOME
        description: "Nome do colaborador."
      - name: CARGO
        description: "Cargo ocupado."
      - name: TITULO_CORTESIA
        description: "Título de tratamento (Ex: Sr., Sra.)."
      - name: DATA_NASCIMENTO
        description: "Data de nascimento."
      - name: DATA_CONTRATACAO
        description: "Data de admissão na empresa."
      - name: ENDERECO
        description: "Endereço residencial."
      - name: CIDADE
        description: "Cidade de residência."
      - name: REGIAO
        description: "Região ou estado."
      - name: CEP
        description: "Código postal residencial."
      - name: PAIS
        description: "País de residência."
      - name: TELEFONE_RESIDENCIAL
        description: "Telefone fixo de casa."
      - name: RAMAL
        description: "Ramal interno."
      - name: FOTO
        description: "Arquivo ou referência da foto."
      - name: NOTAS
        description: "Observações e histórico do funcionário."
      - name: ID_GESTOR
        description: "ID do gestor direto (Auto-relacionamento)."
      - name: CAMINHO_FOTO
        description: "Caminho de rede para a imagem."
      - name: IDADE_COLABORADOR
        description: "Idade atual do colaborador."
      - name: ANOS_EMPRESA
        description: "Número de anos de serviço na empresa."

###############################################################################
############## --- STAGING: DETALHES DOS PEDIDOS (ORDER_DETAILS) --- ##########
###############################################################################
  - name: STG_ORDER_DETAILS
    description: "Itens que compõem cada pedido (detalhamento de produtos)."
    columns:
      - name: ID_PEDIDO
        description: "ID do pedido vinculado."
        data_tests:
          - not_null
      - name: ID_PRODUTO
        description: "ID do produto vendido."
        data_tests:
          - not_null
      - name: PRECO_UNITARIO
        description: "Preço cobrado pela unidade no momento da venda."
      - name: QUANTIDADE
        description: "Quantidade vendida."
      - name: DESCONTO
        description: "Percentual de desconto aplicado."
      - name: PRECO_TOTAL
        description: "Valor total do item (Preço Unitário x Quantidade - Desconto)."

###############################################################################
################### --- STAGING: PRODUTOS (PRODUCTS) --- ######################
###############################################################################
  - name: STG_PRODUCTS
    description: "Catálogo de produtos da empresa."
    columns:
      - name: ID_PRODUTO
        description: "Chave primária do produto."
        data_tests:
          - unique
          - not_null
      - name: NOME_PRODUTO
        description: "Nome comercial do item."
      - name: ID_FORNECEDOR
        description: "ID do fornecedor do produto."
      - name: ID_CATEGORIA
        description: "ID da categoria do produto."
      - name: QUANTIDADE_POR_UNIDADE
        description: "Descrição da embalagem/unidade."
      - name: PRECO_UNITARIO
        description: "Preço de lista atual."
      - name: UNIDADES_ESTOQUE
        description: "Quantidade disponível em estoque."
      - name: UNIDADES_ENCOMENDADAS
        description: "Quantidade em trânsito/encomenda."
      - name: NIVEL_REPOSICAO
        description: "Ponto de pedido para estoque."
      - name: IS_DESCONTINUADO
        description: "Flag indicando se o produto saiu de linha (True/False)."
      - name: VALOR_ESTOQUE
        description: "Valor monetário total do produto em estoque (Preço x Unidades)."
      - name: STATUS_ESTOQUE
        data_tests:
          - accepted_values:
              arguments:  
                values: ['Esgotado', 'Estoque Baixo', 'Estoque Normal']
      - name: NECESSARIO_REPOR
        description: "Flag lógica: True se o estoque estiver baixo e o produto não estiver descontinuado."        

###############################################################################
#################### --- STAGING: REGIÕES (REGION) --- ########################
###############################################################################
  - name: STG_NORTHWIND__REGION
    description: "Macro-regiões de operação."
    columns:
      - name: ID_REGIAO
        description: "ID da região."
        data_tests:
          - unique
          - not_null
      - name: DESCRICAO_REGIAO
        description: "Nome da região (Ex: Northern, Southern)."

###############################################################################
############## --- STAGING: TRANSPORTADORAS (SHIPPERS) --- ####################
###############################################################################
  - name: STG_SHIPPERS
    description: "Transportadoras parceiras."
    columns:
      - name: ID_TRANSPORTADORA
        description: "ID da transportadora."
        data_tests:
          - unique
          - not_null
      - name: NOME_EMPRESA
        description: "Nome da transportadora."
      - name: TELEFONE
        description: "Telefone de contato."

###############################################################################
################# --- STAGING: FORNECEDORES (SUPPLIERS) --- ###################
###############################################################################
  - name: STG_SUPPLIERS
    description: "Dados dos fornecedores de produtos."
    columns:
      - name: ID_FORNECEDOR
        description: "ID único do fornecedor."
        data_tests:
          - unique
          - not_null
      - name: NOME_EMPRESA
        description: "Nome da empresa fornecedora."
      - name: NOME_CONTATO
        description: "Pessoa de contato."
      - name: CARGO_CONTATO
        description: "Cargo do contato."
      - name: ENDERECO
        description: "Endereço comercial."
      - name: CIDADE
        description: "Cidade de origem."
      - name: REGIAO
        description: "Estado ou região."
      - name: CEP
        description: "Código postal."
      - name: PAIS
        description: "País de origem."
      - name: TELEFONE
        description: "Telefone comercial."
      - name: FAX
        description: "Número do fax."
      - name: HOMEPAGE
        description: "Site oficial."

###############################################################################
################# --- STAGING: TERRITÓRIOS (TERRITORIES) --- ##################
###############################################################################
  - name: STG_NORTHWIND__TERRITORIES
    description: "Territórios específicos de atuação."
    columns:
      - name: ID_TERRITORIO
        description: "ID do território."
        data_tests:
          - unique
          - not_null
      - name: DESCRICAO_TERRITORIO
        description: "Nome da cidade ou área do território."
      - name: ID_REGIAO
        description: "Vínculo com a macro-região."
        data_tests:
          - not_null